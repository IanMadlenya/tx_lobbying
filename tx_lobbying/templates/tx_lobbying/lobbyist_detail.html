{% load humanize %}

{% block main %}

  <h1>{{ object }}</h1>

  <section>
    <h2>Name history</h2>
    <ul>
      {% for name, cover in object.get_name_history %}
        <li>{{ name }} ({{ cover.report_date }})</li>
      {% endfor %}
    </ul>
  </section>
  <section>
    <h2>Clients</h2>
    <ul>
      {% for yeardata in object.years.all %}
        <li>
          {{ yeardata.year }}
          <ul>
            {% for client in yeardata.compensation_set.all %}
              <li>{{ client.interest }} ${{ client.amount_low|floatformat:2|intcomma }} &mdash; ${{ client.amount_high|floatformat:2|intcomma }}</li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  </section>
  <section>
    <h2>Cover Sheets</h2>
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Transportation</th>
          <th>Food</th>
          <th>Entertainment</th>
          <th>Gifts</th>
          <th>Awards</th>
          <th>Events</th>
          <th>Media</th>
          <th>Senators</th>
          <th>Representatives</th>
          <th>Other</th>
          <th>Legislative</th>
          <th>Executive</th>
          <th>Family</th>
          <th>Events</th>
          <th>Guests</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for cover in object.coversheets.all %}
          <tr>
            <td>{{ cover.report_date }}</td>
            <td>{{ cover.transportation }}</td>
            <td>${{ cover.food|floatformat:2|intcomma }}</td>
            <td>${{ cover.entertainment|floatformat:2|intcomma }}</td>
            <td>${{ cover.gifts|floatformat:2|intcomma }}</td>
            <td>${{ cover.awards|floatformat:2|intcomma }}</td>
            <td>${{ cover.events|floatformat:2|intcomma }}</td>
            <td>${{ cover.media|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_senators|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_representatives|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_other|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_legislative|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_executive|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_family|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_events|floatformat:2|intcomma }}</td>
            <td>${{ cover.ben_guests|floatformat:2|intcomma }}</td>
            <td>
              {% if cover.details.exists %}
                <ul>
                  {% for detail in cover.details.all %}
                    <li>{{ detail.type }} - {{ detail.amount_guess }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

{% endblock %}
